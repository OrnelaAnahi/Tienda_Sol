import mongoose from "mongoose";
import { NotificacionModel } from "../utils/Schemas/NotificacionSchema.js";

// ğŸ”§ ConfigurÃ¡ tu conexiÃ³n local
const DB_URI = "mongodb://localhost:27017/Tienda_Sol";

// ğŸ§‘â€ğŸ’¼ ID del usuario que pasaste
const usuarioId = "68e852e25816c4293bf6a1aa";

const notificacionesMock = [
  {
    usuarioDestino: usuarioId,
    mensaje: "Tu pedido #101 fue confirmado con Ã©xito âœ…",
    leida: false,
  },
  {
    usuarioDestino: usuarioId,
    mensaje: "Tu pedido #101 fue enviado ğŸšš",
    leida: false,
  },
  {
    usuarioDestino: usuarioId,
    mensaje: "Tu pedido #100 fue cancelado âŒ",
    leida: true,
    fechaLeida: new Date(),
  },
  {
    usuarioDestino: usuarioId,
    mensaje: "Nuevo mensaje del cliente sobre el pedido #102 ğŸ“©",
    leida: false,
  },
];

async function main() {
  try {
    await mongoose.connect(DB_URI);
    console.log("âœ… Conectado a MongoDB");

    // Limpia las notificaciones anteriores del usuario (opcional)
    await NotificacionModel.deleteMany({ usuarioDestino: usuarioId });

    // Inserta las notificaciones de prueba
    const result = await NotificacionModel.insertMany(notificacionesMock);
    console.log(`ğŸ“¬ ${result.length} notificaciones insertadas para el usuario ${usuarioId}`);

    await mongoose.disconnect();
    console.log("ğŸ”Œ Desconectado de MongoDB");
  } catch (error) {
    console.error("âŒ Error al insertar notificaciones:", error);
  }
}

main();
